#include <iostream>
#include <vector>
#include <algorithm>
#include <fstream>
#include <chrono>  // Para medir o tempo de execução

// Definição de uma struct para armazenar os dados dos objetos
struct Objeto {
    int peso;
    int valor;
};

// Função para comparar objetos pelo valor (ordem decrescente)
bool compararPorValor(const Objeto &a, const Objeto &b) {
    return a.valor > b.valor;
}

// Função para selecionar os objetos de acordo com a heurística "mais caro primeiro"
int selecionarObjetos(std::vector<Objeto> &objetos, int capacidadeMaxima) {
    // Ordenar os objetos pelo valor em ordem decrescente
    std::sort(objetos.begin(), objetos.end(), compararPorValor);
    
    int valorTotal = 0;
    int pesoAtual = 0;

    // Selecionar os objetos dentro da capacidade máxima
    for (const auto &objeto : objetos) {
        if (pesoAtual + objeto.peso <= capacidadeMaxima) {
            pesoAtual += objeto.peso;
            valorTotal += objeto.valor;
        }
    }

    return valorTotal;
}

int main() {
    std::vector<Objeto> objetos;
    int capacidadeMaxima;

    // Abrir o arquivo de entrada
    std::ifstream entrada("Aula08_hill_climbing\\Entrada_1.txt");

    if (!entrada) {
        std::cerr << "Erro ao abrir o arquivo!" << std::endl;
        return 1;
    }

    // Ler a capacidade máxima da primeira linha
    entrada >> capacidadeMaxima;

    // Ler os pesos e valores do arquivo e armazenar no vetor de objetos
    int peso, valor;
    while (entrada >> peso >> valor) {
        objetos.push_back({peso, valor});
    }

    entrada.close();  // Fechar o arquivo após a leitura

    // Medir o tempo de execução
    auto inicio = std::chrono::high_resolution_clock::now();

    // Selecionar os objetos de acordo com a heurística "mais caro primeiro"
    int valorMaximo = selecionarObjetos(objetos, capacidadeMaxima);

    auto fim = std::chrono::high_resolution_clock::now();
    std::chrono::duration<double> duracao = fim - inicio;

    // Exibir os resultados
    std::cout << "Valor total dos objetos selecionados: " << valorMaximo << std::endl;
    std::cout << "Tempo de execução: " << duracao.count() << " segundos" << std::endl;

    return 0;
}
